// Generated by dts-bundle-generator v9.0.0

import { Collection, CreateIndexesOptions, Db, Document, IndexSpecification, ObjectId } from 'mongodb';

export declare abstract class Docs<DATA extends Document> {
	abstract readonly colNm: string;
	abstract readonly migrate: Migrate<DATA>[];
	abstract readonly db: Db;
	protected getCol(): Collection<DATA>;
}
export declare class DocKv extends Docs<Kv> {
	readonly colNm: string;
	readonly migrate: Migrate<Kv>[];
	readonly db: Db;
	constructor(db: Db, ...colNms: string[]);
	get<Input>(key: string, ...defaults: Input[]): Promise<Input>;
	set<Input>(key: string, value: Input): Promise<void>;
}
export declare const fnMongo: {
	reindex: (col: import("mongodb").Collection<any>, { list }: IdxArgs) => Promise<void>;
	migrate: (db: import("mongodb").Db, ...models: Docs<any>[]) => Promise<void>;
	findOne: <RES extends object>(col: import("mongodb").Collection<RES>, filter: object, ...sorts: import("mongodb").Sort[]) => Promise<RES>;
	findAll: <RES_1 extends object>(col: import("mongodb").Collection<RES_1>, filter: object, ...sorts: import("mongodb").Sort[]) => Promise<RES_1[]>;
	findList: <RES_2 extends object>(col: import("mongodb").Collection<RES_2>, filter: object, pager: Pager, ...sorts: import("mongodb").Sort[]) => Promise<ResultList<RES_2>>;
	connectFactory: (v: ConnectArg) => () => Promise<import("mongodb").Db>;
};
export declare namespace QueryHelper {
	type DateQuery = Partial<{
		$lt: Date;
		$lte: Date;
		$eq: Date;
		$gt: Date;
		$gte: Date;
	}>;
}
export interface ConnectArg {
	host: string;
	username: string;
	password: string;
	database: string;
}
export interface Kv {
	_id: ObjectId;
	key: string;
	value: string;
	updatedAt: Date;
}
export type Bool = "true" | "false";
export type IdsElem = [
	IndexSpecification,
	CreateIndexesOptions
];
export type IdxArgs = {
	list: IdsElem[];
};
export type Migrate<DATA extends Document> = (col: Collection<DATA>) => Promise<void>;
export type Pager = {
	page: number;
	size: number;
};
export type ResultList<RES extends object> = {
	page: number;
	size: number;
	total: number;
	list: RES[];
};

export {};
